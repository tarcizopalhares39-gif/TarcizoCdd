<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRO 4.0 Ultra - Detalhes de Rastreio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            margin: 0;\n            padding: 0;\n        }\n\n        body {\n            background: linear-gradient(180deg, #00152e 0%, #000000 50%);\n            background-attachment: fixed;\n            color: #ffffff;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            min-height: 100vh;\n            padding: 20px;\n            perspective: 1000px;\n            overflow-x: hidden;\n        }\n\n        .container {\n            background: linear-gradient(145deg, #111111, #050505);\n            padding: 30px;\n            border-radius: 20px;\n            width: 100%;\n            max-width: 600px;\n            border-top: 3px solid #00BFFF;\n            box-shadow: inset 0 15px 15px -15px rgba(0, 191, 255, 0.4), 0 6px 0 #000000, 0 15px 20px rgba(0,0,0,0.9);\n            animation: slideIn 0.8s ease-out;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(20px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        .header {\n            display: flex;\n            align-items: center;\n            gap: 15px;\n            margin-bottom: 30px;\n            padding-bottom: 20px;\n            border-bottom: 1px solid #1a1a1a;\n        }\n\n        .header-icon {\n            font-size: 2em;\n            color: #00BFFF;\n            text-shadow: -1px -1px 1px rgba(255, 255, 255, 0.3), 2px 2px 3px rgba(0, 0, 0, 0.9), 4px 4px 5px rgba(0, 0, 0, 0.8);\n        }\n\n        .header-title {\n            font-size: 1.8em;\n            font-weight: 800;\n            color: #ffffff;\n            text-shadow: 0 2px 4px rgba(0,0,0,0.8);\n        }\n\n        .back-btn {\n            position: absolute;\n            top: 20px;\n            left: 20px;\n            background: linear-gradient(145deg, #111111, #050505);\n            border: 1px solid #1a1a1a;\n            color: #00BFFF;\n            width: 40px;\n            height: 40px;\n            border-radius: 10px;\n            cursor: pointer;\n            font-size: 1.2em;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            transition: all 0.3s ease;\n        }\n\n        .back-btn:hover {\n            border-color: #00BFFF;\n            box-shadow: 0 0 10px rgba(0, 191, 255, 0.2);\n        }\n\n        .back-btn:active {\n            transform: translateY(2px);\n        }\n\n        .loading {\n            text-align: center;\n            display: none;\n        }\n\n        .loading.show {\n            display: block;\n        }\n\n        .spinner {\n            width: 50px;\n            height: 50px;\n            border: 3px solid #1a1a1a;\n            border-top-color: #00BFFF;\n            border-radius: 50%;\n            animation: spin 1s linear infinite;\n            margin: 0 auto 20px;\n        }\n\n        @keyframes spin {\n            to { transform: rotate(360deg); }\n        }\n\n        .loading-text {\n            color: #FFD700;\n            font-weight: bold;\n            font-size: 1.1em;\n        }\n\n        .error {\n            background: linear-gradient(145deg, #111111, #050505);\n            padding: 20px;\n            border-radius: 15px;\n            border-top: 3px solid #ff4d4d;\n            box-shadow: inset 0 15px 15px -15px rgba(255, 77, 77, 0.4), 0 6px 0 #000000, 0 15px 20px rgba(0,0,0,0.9);\n            display: none;\n            animation: slideIn 0.6s ease-out;\n        }\n\n        .error.show {\n            display: block;\n        }\n\n        .error-icon {\n            color: #ff4d4d;\n            font-size: 1.5em;\n            margin-bottom: 10px;\n        }\n\n        .error-title {\n            color: #ff4d4d;\n            font-weight: bold;\n            font-size: 1.1em;\n            margin-bottom: 10px;\n        }\n\n        .error-message {\n            color: #888888;\n            margin-bottom: 20px;\n            line-height: 1.5;\n        }\n\n        .result {\n            display: none;\n        }\n\n        .result.show {\n            display: block;\n        }\n\n        .status-header {\n            text-align: center;\n            margin-bottom: 30px;\n            animation: slideIn 0.6s ease-out;\n        }\n\n        .status-label {\n            color: #888888;\n            font-size: 0.85em;\n            text-transform: uppercase;\n            letter-spacing: 1px;\n            margin-bottom: 10px;\n        }\n\n        .status-current {\n            color: #00BFFF;\n            font-weight: 800;\n            font-size: 1.5em;\n            text-shadow: 0 2px 5px rgba(0,0,0,0.8);\n        }\n\n        .timeline {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .timeline-item {\n            background: linear-gradient(145deg, #111111, #050505);\n            padding: 20px;\n            border-radius: 15px;\n            border-top: 3px solid #FFD700;\n            box-shadow: inset 0 15px 15px -15px rgba(255, 215, 0, 0.4), 0 6px 0 #000000, 0 15px 20px rgba(0,0,0,0.9);\n            display: flex;\n            gap: 15px;\n            animation: slideIn 0.6s ease-out;\n            opacity: 0;\n        }\n\n        .timeline-item.first {\n            border-top-color: #00BFFF;\n            box-shadow: inset 0 15px 15px -15px rgba(0, 191, 255, 0.4), 0 6px 0 #000000, 0 15px 20px rgba(0,0,0,0.9);\n        }\n\n        .timeline-item.show {\n            opacity: 1;\n        }\n\n        .timeline-icon {\n            font-size: 1.5em;\n            color: #FFD700;\n            flex-shrink: 0;\n            margin-top: 3px;\n        }\n\n        .timeline-item.first .timeline-icon {\n            color: #00BFFF;\n        }\n\n        .timeline-content {\n            flex: 1;\n        }\n\n        .timeline-title {\n            font-weight: bold;\n            font-size: 1.05em;\n            color: #ffffff;\n            margin-bottom: 8px;\n        }\n\n        .timeline-item.first .timeline-title {\n            color: #00BFFF;\n        }\n\n        .timeline-date {\n            color: #FFD700;\n            font-size: 0.9em;\n            font-weight: bold;\n            margin-bottom: 8px;\n            display: flex;\n            align-items: center;\n            gap: 5px;\n        }\n\n        .timeline-location {\n            color: #888888;\n            font-size: 0.9em;\n            line-height: 1.4;\n        }\n\n        .action-btn {\n            width: 100%;\n            background: linear-gradient(145deg, #111111, #050505);\n            color: white;\n            border: none;\n            padding: 16px;\n            border-radius: 12px;\n            font-size: 16px;\n            font-weight: bold;\n            cursor: pointer;\n            border-top: 3px solid #4364F7;\n            box-shadow: inset 0 15px 15px -15px rgba(67, 100, 247, 0.6), 0 6px 0 #000000, 0 15px 20px rgba(0,0,0,0.9);\n            transition: transform 0.1s ease, box-shadow 0.1s ease;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .action-btn:active {\n            transform: translateY(6px);\n            border-top-color: transparent;\n            box-shadow: inset 0 10px 15px rgba(0,0,0,0.9), 0 0px 0 #000000, 0 5px 10px rgba(0,0,0,0.5);\n        }\n\n        .action-btn:hover {\n            border-top-color: #3d5ae0;\n        }\n    </style>\n</head>\n<body>\n    <button class=\"back-btn\" onclick=\"window.history.back()\">\n        <i class=\"fas fa-arrow-left\"></i>\n    </button>\n\n    <div class=\"container\">\n        <div class=\"header\">\n            <div class=\"header-icon\">\n                <i class=\"fas fa-box-open\"></i>\n            </div>\n            <div class=\"header-title\">SRO 4.0 Ultra</div>\n        </div>\n\n        <div class=\"loading show\" id=\"loading\">\n            <div class=\"spinner\"></div>\n            <div class=\"loading-text\">Consultando base...</div>\n        </div>\n\n        <div class=\"error\" id=\"error\">\n            <div class=\"error-icon\"><i class=\"fas fa-exclamation-triangle\"></i></div>\n            <div class=\"error-title\">Atenção</div>\n            <div class=\"error-message\" id=\"errorMessage\"></div>\n            <button class=\"action-btn\" onclick=\"window.location.href='/'\">\n                <i class=\"fas fa-search\"></i> Nova Consulta\n            </button>\n        </div>\n\n        <div class=\"result\" id=\"result\">\n            <div class=\"status-header\">\n                <div class=\"status-label\">Status Atual</div>\n                <div class=\"status-current\" id=\"statusCurrent\"></div>\n            </div>\n            <div class=\"timeline\" id=\"timeline\"></div>\n            <button class=\"action-btn\" onclick=\"window.location.href='/'\">\n                <i class=\"fas fa-search\"></i> Nova Consulta\n            </button>\n        </div>\n    </div>\n\n    <script>\n        const API_TOKEN = 'sr_live_6xpHxAJPw7cdTXXLQEhByqfpOlXgBCAFmbBk-FsA4Dw';\n        const API_URL = 'https://seurastreio.com.br/api/public/rastreio/';\n\n        async function loadTracking() {\n            const params = new URLSearchParams(window.location.search);\n            const code = params.get('code');\n\n            if (!code) {\n                showError('Código de rastreio não fornecido');\n                return;\n            }\n\n            try {\n                const response = await fetch(`${API_URL}${code}`, {\n                    method: 'GET',\n                    headers: {\n                        'Authorization': `Bearer ${API_TOKEN}`,\n                        'Accept': 'application/json',\n                    },\n                });\n\n                const data = await response.json();\n\n                if (response.status === 401) {\n                    throw new Error('Erro de autenticação');\n                }\n\n                if (response.status === 429) {\n                    throw new Error('Limite de consultas atingido');\n                }\n\n                if (!data.success) {\n                    throw new Error(data.message || 'Objeto não encontrado');\n                }\n\n                displayTracking(data);\n            } catch (error) {\n                showError(error.message || 'Erro ao buscar rastreio');\n            }\n        }\n\n        function showError(message) {\n            document.getElementById('loading').classList.remove('show');\n            document.getElementById('error').classList.add('show');\n            document.getElementById('errorMessage').textContent = message;\n        }\n\n        function displayTracking(data) {\n            document.getElementById('loading').classList.remove('show');\n            document.getElementById('result').classList.add('show');\n\n            if (data.eventoMaisRecente) {\n                document.getElementById('statusCurrent').textContent = data.eventoMaisRecente.descricao;\n            }\n\n            const timeline = document.getElementById('timeline');\n            timeline.innerHTML = '';\n\n            if (data.eventos && data.eventos.length > 0) {\n                data.eventos.forEach((event, index) => {\n                    const item = document.createElement('div');\n                    item.className = `timeline-item ${index === 0 ? 'first' : ''}`;\n                    item.innerHTML = `\n                        <div class=\"timeline-icon\">\n                            <i class=\"fas ${index === 0 ? 'fa-map-pin' : 'fa-check-circle'}\"></i>\n                        </div>\n                        <div class=\"timeline-content\">\n                            <div class=\"timeline-title\">${event.descricao}</div>\n                            <div class=\"timeline-date\">\n                                <i class=\"fas fa-clock\"></i>\n                                ${event.data} às ${event.hora}\n                            </div>\n                            <div class=\"timeline-location\">${event.local}</div>\n                        </div>\n                    `;\n                    timeline.appendChild(item);\n\n                    setTimeout(() => {\n                        item.classList.add('show');\n                    }, index * 150);\n                });\n            }\n        }\n\n        window.addEventListener('load', loadTracking);\n    </script>\n</body>\n</html>\n
